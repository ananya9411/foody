{"ast":null,"code":"// src/pages/Checkout.jsx\nimport React,{useEffect,useState}from\"react\";import{useCart}from\"../context/CartContext\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Checkout(){const{cart,clearCart}=useCart();const navigate=useNavigate();const[orderItems,setOrderItems]=useState(cart);const[formData,setFormData]=useState({fullName:\"\",phone:\"\",flat:\"\",area:\"\",landmark:\"\",pincode:\"\",city:\"\",state:\"\"});const[errors,setErrors]=useState({});useEffect(()=>{const instantOrder=sessionStorage.getItem(\"instantOrder\");if(instantOrder){const item=JSON.parse(instantOrder);setOrderItems([{...item}]);sessionStorage.removeItem(\"instantOrder\");}},[]);const subtotal=orderItems.reduce((sum,item)=>sum+item.price*(item.quantity||1),0);const gst=subtotal*0.12;const delivery=30;const total=subtotal+gst+delivery;const handleChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});if(value.trim()!==\"\"){setErrors(prev=>({...prev,[name]:false}));}};const handlePlaceOrder=()=>{const newErrors={};Object.keys(formData).forEach(key=>{if(!formData[key].trim()){newErrors[key]=true;}});if(Object.keys(newErrors).length>0){setErrors(newErrors);return;}clearCart();navigate(\"/success\",{replace:true});};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto py-10 px-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-orange-600 mb-6\",children:\"Checkout\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"Delivery Details\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:[{name:\"fullName\",placeholder:\"Full Name\"},{name:\"phone\",placeholder:\"Phone Number\"},{name:\"flat\",placeholder:\"Flat, House no., Building, Company, Apartment\"},{name:\"area\",placeholder:\"Area, Street, Sector, Village\"},{name:\"landmark\",placeholder:\"Landmark\"},{name:\"pincode\",placeholder:\"Pincode\"},{name:\"city\",placeholder:\"Town/City\"},{name:\"state\",placeholder:\"State\"}].map(_ref=>{let{name,placeholder}=_ref;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:name,placeholder:placeholder,value:formData[name],onChange:handleChange,className:`w-full border rounded p-2 ${errors[name]?\"border-red-500\":\"\"}`}),errors[name]&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:\"This field is required.\"})]},name);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-4\",children:\"Order Summary\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:orderItems.map(item=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex justify-between items-center border-b pb-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:item.name}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",item.price,\" \\xD7 \",item.quantity||1]})]},item.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-sm space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Subtotal\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",subtotal.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"GST (12%)\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",gst.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Delivery\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",delivery]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between font-bold border-t pt-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",total.toFixed(2)]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePlaceOrder,className:\"mt-6 w-full bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-full\",children:\"Place Order\"})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useCart","useNavigate","jsx","_jsx","jsxs","_jsxs","Checkout","cart","clearCart","navigate","orderItems","setOrderItems","formData","setFormData","fullName","phone","flat","area","landmark","pincode","city","state","errors","setErrors","instantOrder","sessionStorage","getItem","item","JSON","parse","removeItem","subtotal","reduce","sum","price","quantity","gst","delivery","total","handleChange","e","name","value","target","trim","prev","handlePlaceOrder","newErrors","Object","keys","forEach","key","length","replace","className","children","placeholder","map","_ref","type","onChange","id","toFixed","onClick"],"sources":["C:/Users/neela/Downloads/food-ordering-app (1)/src/pages/Checkout.jsx"],"sourcesContent":["// src/pages/Checkout.jsx\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useCart } from \"../context/CartContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Checkout() {\r\n  const { cart, clearCart } = useCart();\r\n  const navigate = useNavigate();\r\n  const [orderItems, setOrderItems] = useState(cart);\r\n  const [formData, setFormData] = useState({\r\n    fullName: \"\",\r\n    phone: \"\",\r\n    flat: \"\",\r\n    area: \"\",\r\n    landmark: \"\",\r\n    pincode: \"\",\r\n    city: \"\",\r\n    state: \"\",\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n\r\n  useEffect(() => {\r\n    const instantOrder = sessionStorage.getItem(\"instantOrder\");\r\n    if (instantOrder) {\r\n      const item = JSON.parse(instantOrder);\r\n      setOrderItems([{ ...item }]);\r\n      sessionStorage.removeItem(\"instantOrder\");\r\n    }\r\n  }, []);\r\n\r\n  const subtotal = orderItems.reduce(\r\n    (sum, item) => sum + item.price * (item.quantity || 1),\r\n    0\r\n  );\r\n  const gst = subtotal * 0.12;\r\n  const delivery = 30;\r\n  const total = subtotal + gst + delivery;\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n    if (value.trim() !== \"\") {\r\n      setErrors((prev) => ({ ...prev, [name]: false }));\r\n    }\r\n  };\r\n\r\n  const handlePlaceOrder = () => {\r\n    const newErrors = {};\r\n    Object.keys(formData).forEach((key) => {\r\n      if (!formData[key].trim()) {\r\n        newErrors[key] = true;\r\n      }\r\n    });\r\n\r\n    if (Object.keys(newErrors).length > 0) {\r\n      setErrors(newErrors);\r\n      return;\r\n    }\r\n\r\n    clearCart();\r\n    navigate(\"/success\", { replace: true });\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto py-10 px-4\">\r\n      <h2 className=\"text-3xl font-bold text-orange-600 mb-6\">Checkout</h2>\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-8\">\r\n        <div>\r\n          <h3 className=\"text-xl font-semibold mb-4\">Delivery Details</h3>\r\n          <div className=\"space-y-4\">\r\n            {[\r\n              { name: \"fullName\", placeholder: \"Full Name\" },\r\n              { name: \"phone\", placeholder: \"Phone Number\" },\r\n              {\r\n                name: \"flat\",\r\n                placeholder: \"Flat, House no., Building, Company, Apartment\",\r\n              },\r\n              { name: \"area\", placeholder: \"Area, Street, Sector, Village\" },\r\n              { name: \"landmark\", placeholder: \"Landmark\" },\r\n              { name: \"pincode\", placeholder: \"Pincode\" },\r\n              { name: \"city\", placeholder: \"Town/City\" },\r\n              { name: \"state\", placeholder: \"State\" },\r\n            ].map(({ name, placeholder }) => (\r\n              <div key={name}>\r\n                <input\r\n                  type=\"text\"\r\n                  name={name}\r\n                  placeholder={placeholder}\r\n                  value={formData[name]}\r\n                  onChange={handleChange}\r\n                  className={`w-full border rounded p-2 ${\r\n                    errors[name] ? \"border-red-500\" : \"\"\r\n                  }`}\r\n                />\r\n                {errors[name] && (\r\n                  <p className=\"text-red-500 text-sm mt-1\">\r\n                    This field is required.\r\n                  </p>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <h3 className=\"text-xl font-semibold mb-4\">Order Summary</h3>\r\n          <ul className=\"space-y-2\">\r\n            {orderItems.map((item) => (\r\n              <li\r\n                key={item.id}\r\n                className=\"flex justify-between items-center border-b pb-2\"\r\n              >\r\n                <span>{item.name}</span>\r\n                <span>\r\n                  ₹{item.price} × {item.quantity || 1}\r\n                </span>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n          <div className=\"mt-4 text-sm space-y-1\">\r\n            <div className=\"flex justify-between\">\r\n              <span>Subtotal</span>\r\n              <span>₹{subtotal.toFixed(2)}</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>GST (12%)</span>\r\n              <span>₹{gst.toFixed(2)}</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Delivery</span>\r\n              <span>₹{delivery}</span>\r\n            </div>\r\n            <div className=\"flex justify-between font-bold border-t pt-2\">\r\n              <span>Total</span>\r\n              <span>₹{total.toFixed(2)}</span>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={handlePlaceOrder}\r\n            className=\"mt-6 w-full bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-full\"\r\n          >\r\n            Place Order\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}